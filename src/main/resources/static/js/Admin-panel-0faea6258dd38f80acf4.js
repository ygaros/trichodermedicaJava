(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,i){"use strict";t.a=e=>{const t={required:(e="To pole jest wymagane!")=>t=>!!t||e,number:e=>e&&Number.isInteger(Number(e))||"Podany numer nie jest poprawny!",email:e=>/.+@.+\..+/.test(e)||"Podany e-mail nie jest poprawny!",max:e=>t=>t&&t.length<=e||`Nie może przekraczać ${e} znaków!`,min:e=>t=>t&&t.length>e||`Musi zawierać conajmniej ${e} znaków!`,time:e=>/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(e)||"XX:XX"};if("string"==typeof e)return{data:()=>({rules:{[e]:t.hasOwnProperty(e)?t[e]:`Validation for "${current}" was not found`}})};if(Array.isArray(e)){const i=e.reduce((e,i)=>(e[i]=t.hasOwnProperty(i)?t[i]:`Validation for "${i}" was not found`,e),{});return{data:()=>({rules:i})}}return{data:()=>({rules:t})}}},46:function(e,t,i){"use strict";t.a={data:()=>({error:""}),methods:{handleApiError(e){try{e&&e.hasOwnProperty("response")&&e.response.hasOwnProperty("data")&&(this.error=e.response.data)}catch(e){this.error="INTERNAL_SERVER_ERROR"}}}}},52:function(e,t,i){},53:function(e,t,i){},59:function(e,t,i){"use strict";var a=i(52);i.n(a).a},60:function(e,t,i){"use strict";var a=i(53);i.n(a).a},61:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this.$createElement,t=this._self._c||e;return t("main",[t("v-row",{staticClass:"view",attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",lg:"6",md:"12"}},[t("add-file-form",{staticClass:"py-4 px-4 mb-4"}),this._v(" "),t("edit-hours-form",{staticClass:"px-4 py-4"})],1),this._v(" "),t("v-col",{attrs:{cols:"12",lg:"6"}},[t("edit-slideshow-form",{staticClass:"px-4 py-4 mb-4"}),this._v(" "),t("edit-treatment-form",{staticClass:"px-4 py-4 mb-4"})],1)],1)],1)};a._withStripped=!0;var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-card-title",[e._v("Dodaj zdjęcie")]),e._v(" "),i("v-form",{on:{submit:function(e){e.preventDefault()}}},[i("v-file-input",{ref:"file",attrs:{accept:"image/*"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),e._v(" "),i("v-card-actions",[i("v-btn",{staticClass:"primary",on:{click:function(t){return e.submitFile()}}},[e._v("DODAJ")])],1)],1),e._v(" "),e.error?i("h4",{staticClass:"error px-4 py-4"},[e._v(e._s(e.error))]):e._e()],1)};s._withStripped=!0;var r=i(46),n={mixins:[r.a],data:()=>({file:null}),methods:{submitFile(){let e=new FormData;e.append("file",this.file),this.$http.post("/files/uploadfile/zdjecia",e,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.file=null}).catch(this.handleApiError)},handleFileUpload(){this.$refs.file.files[0]&&(this.file=this.$refs.file.files[0])}}},l=i(0),o=Object(l.a)(n,s,[],!1,null,null,null);o.options.__file="client/src/views/admin-panel/add-file-form.vue";var c=o.exports,d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-card-title",[i("p",[e._v("Edytuj godziny otwarcia")])]),e._v(" "),e.open?i("v-form",[e.data&&e.data.openHours?i("v-list",e._l(e.data.openHours,(function(t){return i("v-list-item",{key:t.day},[i("v-list-item-title",[e._v(e._s(t.day))]),e._v(" "),i("v-text-field",{staticClass:"mx-2",attrs:{placeholder:t.open,rules:[e.rules.required("Wpisz godzinę!"),e.rules.time]},model:{value:t.open,callback:function(i){e.$set(t,"open",i)},expression:"item.open"}}),e._v("\n        :\n        "),i("v-text-field",{staticClass:"mx-2",attrs:{rules:t.close?[e.rules.required(),e.rules.time]:[],placeholder:t.close},model:{value:t.close,callback:function(i){e.$set(t,"close",i)},expression:"item.close"}})],1)})),1):e._e()],1):e._e(),e._v(" "),i("v-card-actions",[i("v-btn",{staticClass:"primary",on:{click:function(t){e.open?e.save():e.openForm()}}},[e._v(e._s(e.open?"Zapisz":"Edytuj")+"\n    ")])],1),e._v(" "),e.error?i("h4",{staticClass:"error px-4 py-3"},[e._v(e._s(e.error))]):e._e()],1)};d._withStripped=!0;var p=i(3),m=i(45),v={mixins:[Object(m.a)(["required","time"]),r.a],data:()=>({open:!0,data:null}),created(){this.$store.dispatch("admin/fetchData","/api/admin/kontakt").then(e=>{this.data=(e=>JSON.parse(JSON.stringify(e)))(e)}).catch(this.handleApiError)},methods:{openForm(){this.open=!0},save(){this.$store.dispatch("admin/save",this.data).then(()=>this.open=!1).catch(this.handleApiError)}}},u=Object(l.a)(v,d,[],!1,null,null,null);u.options.__file="client/src/views/admin-panel/edit-hours-form.vue";var h=u.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-card-title",[e._v("Slideshow")]),e._v(" "),e.images&&e.slides?i("app-image-picker",{attrs:{value:e.images,selected:e.slides,limit:6,maxDisplayed:6},on:{submit:e.save}}):e._e(),e._v(" "),e.error?i("h4",{staticClass:"error px-4 py-4"},[e._v(e._s(e.error))]):e._e()],1)};_._withStripped=!0;var f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.active?i("v-container",{staticClass:"px-0",attrs:{fluid:""}},[i("p",{staticClass:"text-left my-0"},[e._v(e._s(e.active.size)+"/"+e._s(e.limit))]),e._v(" "),i("v-row",{attrs:{dense:""}},e._l(e.currentPage,(function(t,a){return i("v-col",{key:a,attrs:{cols:"6",xs:"6",lg:"2"}},[i("v-card",{staticClass:"overflow-hidden",on:{click:function(i){e.active.has(t.id)?e.removePic(t.id):e.addPic(t.id)}}},[i("v-img",{staticClass:"image",attrs:{src:t.path,height:"80px",width:"auto",cover:""}}),e._v(" "),e.active.has(t.id)?i("v-icon",{staticClass:"image__icon success lighten-1"},[e._v("mdi-check")]):e._e()],1)],1)})),1),e._v(" "),i("v-card-actions",[i("v-btn",{staticClass:"primary",attrs:{type:"submit"},on:{click:e.save}},[e._v("ZAPISZ")]),e._v(" "),i("v-spacer"),e._v(" "),i("v-btn",{on:{click:e.previousPage}},[i("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),i("v-btn",{on:{click:e.nextPage}},[i("v-icon",[e._v("mdi-arrow-right")])],1)],1)],1):e._e()};f._withStripped=!0;var w={props:["value","limit","maxDisplayed","selected"],data:()=>({pageNum:0,active:null}),computed:{images(){return new Set(this.value)},currentPage(){return[...this.value].slice(this.pageNum*this.maxDisplayed,this.pageNum*this.maxDisplayed+this.maxDisplayed).map(e=>e)}},mounted(){this.active=new Set(this.$props.selected)},methods:{nextPage(){this.pageNum+1<this.images.size/this.maxDisplayed&&this.pageNum++},previousPage(){this.pageNum>0&&this.pageNum--},save(){this.$emit("submit",this.active)},addPic(e){this.active.size<this.limit&&(this.active=new Set(this.active.add(e)))},removePic(e){this.active.delete(e),this.active=new Set(this.active)}}},g=(i(59),Object(l.a)(w,f,[],!1,null,"346c8138",null));g.options.__file="client/src/components/app-image-picker.vue";var y=g.exports,b={mixins:[r.a],components:{appImagePicker:y},created(){this.$store.dispatch("admin/fetchData","/api/admin/slideshow").then(({slideshow:e})=>{this.slideshow=e,this.slides=new Set(e.slides)}).catch(this.handleApiError)},data:()=>({slideshow:null,slides:null}),computed:{...Object(p.b)({images:e=>e.admin.images})},methods:{save(e){console.log(e),this.slideshow.slides=[...e],this.$http({method:"post",url:"/api/admin/slideshow",data:this.slideshow}).catch(this.handleApiError)}}},x=Object(l.a)(b,_,[],!1,null,"e627a84a",null);x.options.__file="client/src/views/admin-panel/edit-slideshow-form.vue";var k=x.exports,$=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("v-card-title",[e._v("Edytuj listę zabiegów")]),e._v(" "),i("v-form",[i("v-list",[e._l(e.content,(function(t){return i("v-list-item",{key:t.id,on:{click:function(i){return e.getTreatment(t.id)}}},[i("p",[e._v(e._s(t.name))])])})),e._v(" "),i("v-list-item",[i("v-text-field",{model:{value:e.newTreatment,callback:function(t){e.newTreatment=t},expression:"newTreatment"}}),e._v(" "),i("v-btn",{on:{click:e.addTreatment}},[e._v("add")])],1)],2)],1),e._v(" "),i("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.modal?i("v-card",[i("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("\n        "+e._s(e.modal.name)+"\n      ")]),e._v(" "),i("v-card-text",[i("v-list",[e._l(e.modal.procedures,(function(t){return i("v-list-item",{key:t.name},[e._v("\n            "+e._s(t.name)+"\n          ")])})),e._v(" "),i("v-list-item",[i("v-text-field",{model:{value:e.newProcedure,callback:function(t){e.newProcedure=t},expression:"newProcedure"}}),e._v(" "),i("v-btn",{on:{click:e.addProcedure}},[e._v("add")])],1),e._v(" "),i("v-list-item",[e._v(e._s(e.modal.duration))])],2)],1),e._v(" "),i("v-divider"),e._v(" "),i("v-card-actions",[i("v-btn",{attrs:{color:"primary"},on:{click:e.updateTreatment}},[e._v("\n          I accept\n        ")])],1)],1):e._e()],1)],1)};$._withStripped=!0;var P={data:()=>({content:null,dialog:!1,modal:null,newProcedure:null,newTreatment:null}),mounted(){this.$store.dispatch("admin/fetchData","/api/admin/zabieg").then(e=>{this.content=e})},methods:{getTreatment(e){this.$http({method:"get",url:`/api/admin/zabieg/${e}`}).then(({data:e})=>{this.dialog=!0,this.modal=e})},addTreatment(){this.$http({method:"post",url:"/api/admin/zabieg",header:{"Content-type":"application/json"},data:{name:this.newTreatment,procedures:[],duration:0}}).then(()=>{this.newTreatment="",this.$store.dispatch("appState/fetchData")})},addProcedure(){this.modal.procedures.push({name:this.newProcedure}),this.newProcedure=""},updateTreatment(){this.$http({method:"post",url:"/api/admin/zabieg",header:{"Content-type":"application/json"},data:this.modal}).then(()=>this.dialog=!1)}}},C=Object(l.a)(P,$,[],!1,null,null,null);C.options.__file="client/src/views/admin-panel/edit-treatment-form.vue";var j={title:"Panel administratora",components:{addFileForm:c,editHoursForm:h,editSlideshowForm:k,editTreatmentForm:C.exports}},z=(i(60),Object(l.a)(j,a,[],!1,null,"4cdde6b8",null));z.options.__file="client/src/views/Admin-panel.vue";t.default=z.exports}}]);